#include <SDL2/SDL.h>
#include "game.h"

/*
typedef struct _Scene { //Scene structure.
  char name[75]; //name of place
  int **tiles; //tiles!unsigned short
} Scene;
*/
//0 ground, 1 wall, 2 tall wall, 3 door
//4 archway, 5 water, 6 hole(void?)

int test_map[20][20] = {
  {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
  {1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1},
  {1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1},
  {1,2,0,0,0,0,0,0,0,0,0,3,1,0,0,0,0,0,2,1},
  {1,2,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,2,1},
  {1,2,0,1,3,1,0,0,0,0,0,0,0,0,0,0,0,0,2,1},
  {1,2,0,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,2,1},
  {1,2,0,1,1,1,0,0,0,0,1,3,1,0,1,1,0,0,2,1},
  {1,2,0,0,0,0,0,0,0,0,1,1,1,0,1,1,0,0,2,1},
  {1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1},
  {1,2,0,0,0,0,0,1,1,1,0,1,1,1,0,1,1,0,2,1},
  {1,2,0,0,0,1,0,1,1,1,0,1,1,1,0,1,1,0,2,1},
  {1,2,0,0,0,1,0,1,1,1,0,1,1,1,0,1,1,0,2,1},
  {1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1},
  {1,2,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,0,2,1},
  {1,2,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,0,2,1},
  {1,2,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,0,2,1},
  {1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1},
  {1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1},
  {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
};

int test_fog[20][20] = {
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
};

PlayMap * new_map(char *name, int mapsize, char *filename)
{ //creates a new scene
  int i, j;
  PlayMap *scn;
  scn = (PlayMap*)malloc(sizeof (PlayMap));
  strcpy(scn->map_title, name);
  scn->background_layer = (int**)malloc(mapsize * sizeof(int*));
  scn->object_layer = (int**)malloc(mapsize * sizeof(int*));
  scn->collision_layer = (int**)malloc(mapsize * sizeof(int*));
  scn->fog_tiles = (int**)malloc(mapsize * sizeof(int*));
  for(i=0; i < mapsize; i++) {
    scn->tiles[i] = (int*) malloc(mapsize * sizeof(int));
    scn->fog_tiles[i] = (int*) malloc(mapsize * sizeof(int));
  }
  for(j = 0; j < mapsize; j++) {
    for(i = 0; i < mapsize; i++) {
      scn->tiles[j][i] = test_map[j][i];
      scn->fog_tiles[j][i] = test_fog[j][i];
    }
  }
  return scn;
}
